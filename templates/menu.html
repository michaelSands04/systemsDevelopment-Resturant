{% extends "base.html" %}
{% block content %}
  <h1 class="mb-3">Menu</h1>

  <div class="row g-3">
    {% for item in menu %}
      <div class="col-md-4">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title d-flex justify-content-between align-items-start">
              <span>{{ item.name }}</span>

              {% if item.review_count and item.review_count > 0 %}
                <span class="badge bg-info text-dark">
                  ★ {{ item.avg_rating }}/5 ({{ item.review_count }})
                </span>
              {% else %}
                <span class="badge bg-secondary">
                  No ratings
                </span>
              {% endif %}
            </h5>

            <p class="card-text">{{ item.description }}</p>
            <p class="fw-bold">£{{ "%.2f"|format(item.price) }}</p>

            <form method="post" action="/cart/add/{{ item.id }}">
              <button class="btn btn-success" type="submit">Add to cart</button>
            </form>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
{% endblock %}
